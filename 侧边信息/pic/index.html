<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="refresh" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Echarts 绘制正态分布曲线</title>


    <script src="https://cdn.bootcdn.net/ajax/libs/vue/2.6.12/vue.js"></script>

    <!-- 引入 echarts.js -->
    <script src="https://cdn.staticfile.org/echarts/4.3.0/echarts.min.js"></script>
</head>

<body>
    <div id="app">
        <div style=" height: 90px; float: left; padding-left: 450px; ">
            <p>平均值：{{average}}</p>
        </div>
        <div ref="chart" id="chart" style="width: 1866px;height:762px;"></div>
        <div>
        </div>
    </div>

    <script>
        var app = new Vue({
            el: '#app',
            data: {
                input: ''
            },
            computed: {
                /**
                 * @Description： 获取数据源
                 * */
                data: {
                    get() {
                        // 因为数组的监听不太好处理，所以多转换一次
                        return this.input.split(',').map(t => parseFloat(t))
                    },
                    set(v) {
                        // 如果给 data 赋值，只能是数组类型
                        if (!(v instanceof Array)) return
                        // 同步更新 input 的值
                        this.input = v.join(',')
                    }
                },
                /**
                 有序数据源（方便操作）
                 * */
                dataOrderBy() {
                    const data = this.data.concat([]); // 为防止 sort 方法修改原数组，对原数组进行拷贝，操作副本。
                    return data.sort((a, b) => a - b)
                },
                /**
                 数据整理。原数据整理为：{数据值 : 数据频率}
                 * */
                dataAfterClean() {
                    let res = {}
                    const data = this.dataOrderBy
                    for (let i = 0; i < this.data.length; i++) {
                        let key = parseFloat(this.data[i]).toFixed(1) // 这里保留 1 位小数
                        if (key !== "NaN" && parseFloat(key) === 0)
                            key = "0" //这个判断用来处理保留小数位后 -0.0 和 0.0 判定为不同 key 的 bug
                        if (res[key])
                            res[key] += 1
                        else
                            res[key] = 1
                    }
                    return res
                },
                /**
                 * @Description： 数据整理。返回源数据所有值（排序后）
                 * @Author： ChengduMeng
                 * @Date： 2020-11-28 14:35:52
                 * */
                dataAfterCleanX() {
                    return Object.keys(this.dataAfterClean).sort((a, b) => a - b).map(t => parseFloat(t)
                        .toFixed(1)) // 保留 1 位小数
                    // return Object.keys(this.dataAfterClean) // 不保证顺序一致
                },
                /**
                 * @Description： 数据整理。返回源数据所有值对应的频率（排序后） -- 与 dataAfterCleanX 顺序一致
                 * @Author： ChengduMeng
                 * @Date： 2020-11-28 13:59:12
                 * */
                dataAfterCleanY() {
                    let r = []
                    for (let i = 0; i < this.dataAfterCleanX.length; i++) {
                        r.push(this.dataAfterClean[this.dataAfterCleanX[i]])
                    }
                    return r
                },
                /**
                 * @Description： 数据整理。返回源数据所有值对应的频率，刻度更细致（保留 2 位小数） -- 与 dataAfterCleanX 顺序一致
                 * */
                dataAfterCleanXSub() {
                    let r = []
                    for (let i = parseFloat(this.min.toFixed(1)); i <= parseFloat(this.max.toFixed(1)); i +=
                        0)
                        r.push(i.toFixed(2))
                    console.log(r)
                    return r
                },

                /**
                 * @Description： 计算平均数。这里的平均数指的是数学期望、算术平均数
                 * */
                sum() {
                    if (this.data.length === 0) return 0
                    return this.data.reduce((prev, curr) => prev + curr)
                },
                /**
                 * @Description： 计算平均数。这里的平均数指的是数学期望、算术平均数
                 * */
                average() {
                    return this.sum / this.data.length
                },
                /**
                 * @Description： 计算众数
                 * */
                mode() {
                    return 0
                },
                /**
                 * @Description： 计算中位数
                 * */
                median() {
                    const data = this.dataOrderBy
                    return (data[(data.length - 1) >> 1] + data[data.length >> 1]) / 2
                },
                /**
                 * @Description： 计算偏差
                 * */
                deviation() {
                    // 1、求平均数
                    const avg = this.average
                    // 2、返回偏差。 f(x) = x - avg
                    return this.data.map(x => x - avg)
                },
                /**
                 * @Description： 计算总体/样本方差
                 * */
                variance() {
                    if (this.data.length === 0) return 0
                    // 1、求偏差
                    const dev = this.deviation
                    // 2、求偏差平方和
                    const sumOfSquOfDev = dev.map(x => x * x).reduce((x, y) => x + y)
                    // 3、返回方差
                    return sumOfSquOfDev /  (this.data.length - 1) 
                },
                /**
                 * @Description： 计算总体/样本标准差
                 * */
                standardDeviation() {
                    return Math.sqrt(this.variance)
                },
                /**
                 * @Description： 计算一倍标准差范围
                 * */
                standarDevRangeOfOne() {
                    return {
                        low: this.average - 1 * this.standardDeviation,
                        up: this.average + 1 * this.standardDeviation
                    }
                },
                /**
                 * @Description： 计算三倍标准差范围
                 * */
                standarDevRangeOfTwo() {
                    return {
                        low: this.average - 2 * this.standardDeviation,
                        up: this.average + 2 * this.standardDeviation
                    }
                },
                /**
                 * @Description： 计算三倍标准差范围
                 * */
                standarDevRangeOfThree() {
                    return {
                        low: this.average - 3 * this.standardDeviation,
                        up: this.average + 3 * this.standardDeviation
                    }
                },
                /**
                 * @Description： 计算最小值
                 * */
                min() {
                    return Math.min.apply(null, this.data)
                },
                /**
                 * @Description： 计算最大值
                 * */
                max() {
                    return Math.max.apply(null, this.data)
                },
                /**
                 * @Description： 正态分布(高斯分布)计算公式
                 * */
                normalDistribution() {
                    // 计算公式： `f(x) = (1 / (\sqrt {2\pi} \sigma)) e^(-(x-\mu)^2/(2\sigma^2))`
                    let res = []
                    for (let i = 0; i < this.dataAfterCleanX.length; i++) {
                        const x = this.dataAfterCleanX[i]
                        const a = this.standardDeviation
                        const u = this.average
                        const y = (1 / (Math.sqrt(2 * Math.PI) * a)) * (Math.exp(-1 * ((x - u) * (x - u)) / (2 *
                            a * a)))
                        res.push(y)
                        if (x == 11.8)
                            console.log(y) // 正态分布峰值，用于验证
                    }
                    return res
                },

            },
            created() {},
            mounted() {
                const r = 2;
                switch (r) {
                    //Argentina
                    case 1:
                        this.data = [25000, 25000, 60000, 60000, 125000, 85000, 35000, 35000, 35000, 125000, 25000, 15000, 15000, 25000, 25000, 25000, 125000, 35000, 85000, 25000, 45000, 45000, 125000, 125000, 45000, 45000, 375000, 175000, 275000, 45000, 45000, 45000, 25000, 25000, 125000, 125000, 35000, 35000, 45000, 15000, 15000, 5000, 5000, 60000, 35000, 85000, 35000, 35000, 125000, 175000, 35000, 25000, 35000, 35000, 35000, 45000, 45000, 25000, 45000, 45000, 125000, 45000, 85000, 85000, 85000, 85000, 35000, 35000, 15000, 15000, 225000, 125000, 60000, 25000, 25000, 25000, 60000, 45000, 60000, 85000, 175000, 45000, 45000, 85000, 225000, 25000, 25000, 25000, 15000, 15000, 25000, 25000, 25000, 35000, 35000, 85000, 25000, 25000, 25000, 35000, 35000, 25000, 25000, 25000, 35000, 60000, 25000, 35000, 25000, 85000, 45000, 25000, 175000, 45000, 85000, 45000, 85000, 35000, 45000, 60000, 45000, 125000, 25000, 35000, 45000, 25000, 35000, 85000, 15000, 15000, 15000, 15000, 25000, 60000, 25000, 25000, 25000, 25000, 60000, 60000, 35000, 45000, 35000, 175000, 25000, 25000, 25000, 60000, 125000, 45000, 25000, 45000, 60000, 175000, 85000, 60000, 225000, 60000, 60000, 25000, 225000, 85000, 85000, 85000, 45000, 35000, 125000, 25000, 175000, 35000, 125000, 60000, 45000, 45000, 60000, 35000, 35000, 35000, 35000, 45000, 60000, 45000, 45000, 35000, 35000, 125000, 45000, 125000, 125000, 45000, 375000, 175000, 125000, 85000, 60000, 35000, 60000, 60000, 25000, 35000, 45000, 35000, 35000, 175000, 275000, 60000, 60000, 60000, 60000, 5000, 5000, 85000, 85000, 125000, 125000, 60000, 60000, 60000, 125000, 60000, 60000, 125000, 125000, 45000, 45000, 45000, 60000, 85000, 125000, 225000, 35000, 35000, 35000, 85000, 35000, 45000, 60000, 35000, 35000, 35000, 60000, 85000, 85000, 125000, 60000, 60000, 375000, 45000, 25000, 25000, 25000, 125000, 125000, 60000, 45000, 45000, 60000, 60000, 85000, 125000, 15000]
                        break;
                    //France
                    case 2:
                        this.data = [25000, 25000, 15000, 15000, 25000, 15000, 35000, 45000, 275000, 85000, 60000, 60000, 125000, 85000, 125000, 125000, 25000, 35000, 25000, 35000, 35000, 35000, 45000, 25000, 85000, 45000, 45000, 60000, 15000, 15000, 175000, 275000, 35000, 35000, 45000, 60000, 175000, 85000, 60000, 15000, 15000, 175000, 375000, 225000, 275000, 45000, 85000, 45000, 60000, 15000, 35000, 25000, 175000, 225000, 225000, 225000, 225000, 375000, 375000, 275000, 225000, 375000, 375000, 375000, 375000, 375000, 375000, 375000, 375000, 25000, 25000, 45000, 60000, 15000, 15000, 25000, 35000, 375000, 35000, 45000, 85000, 60000, 85000, 15000, 85000, 15000, 175000, 375000, 375000, 60000, 375000, 175000, 85000, 375000, 60000, 60000, 35000, 35000, 45000, 25000, 325000, 125000, 325000, 35000, 60000, 35000, 125000, 125000, 35000, 125000, 45000, 45000, 45000, 85000, 35000, 375000, 85000, 175000, 45000, 45000, 60000, 45000, 45000, 85000, 125000, 125000, 325000, 375000, 125000, 175000, 85000, 25000, 35000, 85000, 375000, 45000, 125000, 85000, 225000, 45000, 60000, 225000, 125000, 35000, 85000, 125000, 175000, 45000, 45000, 45000, 25000, 25000, 25000, 60000, 85000, 60000, 85000, 85000, 85000, 275000, 25000, 35000, 275000, 125000, 60000, 60000, 35000, 35000, 25000, 25000, 175000, 375000, 175000, 125000, 45000, 35000, 35000, 35000, 85000, 35000, 60000, 45000, 15000, 125000, 35000, 125000, 375000, 45000, 60000, 85000, 175000, 225000, 275000, 85000, 25000, 125000, 175000, 375000, 375000, 85000, 35000, 375000, 15000, 15000, 175000, 125000, 85000, 60000, 25000, 35000, 60000, 60000, 60000, 85000, 85000, 375000, 225000, 60000, 60000, 45000, 85000, 85000, 85000, 85000, 60000, 60000, 85000, 25000, 85000, 35000, 60000, 85000, 15000, 15000, 45000, 85000, 45000, 125000, 60000, 225000, 175000, 375000, 325000, 375000, 375000, 45000, 35000, 45000, 60000, 60000, 45000, 45000, 60000, 60000, 125000, 225000, 125000, 175000, 275000, 35000, 35000, 175000, 60000, 35000, 35000, 60000, 375000, 125000, 175000, 25000, 45000, 60000, 45000, 85000, 85000, 125000, 85000, 60000, 85000, 60000, 35000, 85000, 45000, 60000, 15000, 15000, 25000, 25000, 125000, 25000, 60000, 45000, 60000, 45000, 35000, 45000, 60000, 45000, 125000, 225000, 35000, 45000, 85000, 175000, 125000, 225000, 375000, 375000, 375000, 275000, 125000, 125000, 275000, 175000, 125000, 85000, 35000, 35000, 60000, 45000, 125000, 85000, 60000, 60000, 175000, 225000, 275000, 375000, 225000, 175000, 125000, 175000, 325000, 175000, 60000, 375000, 60000, 85000, 175000, 125000, 125000, 175000, 35000, 45000, 45000, 35000, 125000, 85000, 25000, 25000, 45000, 35000, 35000, 60000, 85000, 275000, 125000, 35000, 45000, 60000, 35000, 60000, 60000, 45000, 45000, 60000, 45000, 125000, 45000, 85000, 125000, 175000, 375000, 275000, 35000, 85000, 85000, 375000, 225000, 85000, 125000, 85000, 60000, 125000, 25000, 25000, 60000, 45000, 25000, 60000, 85000, 15000, 15000, 15000, 45000, 60000, 125000, 35000, 60000, 60000, 175000, 175000, 25000, 175000, 25000, 175000, 125000, 125000, 125000, 125000, 125000, 275000, 125000, 45000, 125000, 15000, 25000, 60000, 125000, 225000, 60000, 60000, 25000, 60000, 125000, 85000, 225000, 85000, 60000, 375000, 375000, 85000, 175000, 275000, 125000, 375000, 375000, 60000, 125000, 275000, 275000, 125000, 125000, 85000, 175000, 175000, 35000, 125000, 35000, 25000, 175000, 175000, 375000, 275000, 45000, 175000, 275000, 375000, 375000, 175000, 375000, 175000, 125000, 85000, 225000, 175000, 125000, 85000, 85000, 175000, 45000, 85000, 275000, 375000, 15000, 15000, 15000, 35000, 35000, 85000, 85000, 325000, 375000, 225000, 375000, 325000, 325000, 375000, 375000, 375000, 60000, 85000, 375000, 375000, 60000, 125000, 175000, 225000, 125000, 125000, 60000, 15000, 25000, 25000, 175000, 175000, 85000, 45000, 325000, 35000, 175000, 225000, 45000, 60000, 225000, 25000, 45000, 60000, 60000, 85000, 25000, 60000, 35000, 125000, 225000, 275000, 125000, 175000, 125000, 85000, 375000, 125000, 175000, 375000, 225000, 375000, 375000, 60000, 125000, 275000, 225000, 175000, 225000, 175000, 125000, 85000, 175000, 85000, 125000, 85000, 60000, 35000, 15000, 25000, 375000, 275000, 225000, 125000, 125000, 85000, 60000, 275000, 375000, 375000, 175000, 125000, 35000, 35000, 35000, 125000, 60000, 60000, 15000, 125000, 175000, 325000, 15000, 25000, 175000, 45000, 60000, 60000, 125000, 275000, 35000, 35000, 60000, 225000, 375000, 375000, 375000, 375000, 375000, 85000, 15000, 375000, 85000, 175000, 375000, 175000, 45000, 35000, 45000, 175000, 175000, 35000, 35000, 60000, 85000, 5000, 5000, 85000, 85000, 85000, 85000, 175000, 85000, 125000, 60000, 125000, 60000, 60000, 60000, 175000, 45000, 85000, 60000, 175000, 60000, 25000, 25000, 45000, 45000, 85000, 125000, 125000, 125000, 175000, 375000, 35000, 175000, 85000, 375000, 60000, 85000, 275000, 175000, 35000, 35000, 60000, 60000, 85000, 85000, 125000, 60000, 325000, 325000, 375000, 225000, 275000, 375000, 375000, 85000, 125000, 125000, 325000, 375000, 175000, 60000, 125000, 275000, 375000, 375000, 175000, 225000, 375000, 375000, 375000, 125000, 85000, 35000, 85000, 125000, 375000, 375000, 375000, 125000, 375000, 375000, 275000, 275000, 85000, 60000, 375000, 85000, 45000, 85000, 35000, 35000, 60000, 35000, 25000, 225000, 85000, 45000, 15000, 25000, 45000, 35000, 25000, 25000, 35000, 60000, 225000, 60000, 25000, 25000, 85000, 125000, 175000, 375000, 85000, 275000, 375000, 375000, 375000, 275000, 325000, 225000, 45000, 35000, 125000, 175000, 85000, 60000, 35000, 35000, 45000, 35000, 125000, 175000, 375000, 85000, 35000, 60000, 35000, 375000, 125000, 125000, 175000, 225000, 175000, 35000, 85000, 60000, 375000, 175000, 175000, 15000, 275000, 125000, 125000, 60000, 25000, 45000, 35000, 85000, 25000, 375000, 125000, 25000, 35000, 275000, 225000, 225000, 225000, 375000, 275000, 375000, 225000, 125000, 85000, 375000, 60000, 325000, 375000, 375000, 325000, 60000, 125000, 175000, 375000, 60000, 45000, 45000, 45000, 325000, 125000, 125000, 60000, 45000, 225000, 25000, 60000, 85000, 25000, 85000, 85000, 60000, 60000, 60000, 45000, 175000, 175000, 35000, 175000, 275000, 60000, 15000, 85000, 45000, 275000, 60000, 275000, 125000, 85000, 375000, 375000, 85000, 35000, 35000, 35000, 35000, 35000, 375000, 175000, 225000, 5000, 15000, 5000, 125000, 60000, 35000, 45000, 15000, 225000, 85000, 175000, 125000, 25000, 45000, 45000, 85000, 125000, 45000, 375000, 375000, 375000, 375000, 375000, 375000, 375000, 60000, 125000, 375000, 375000, 375000, 175000, 375000, 275000, 375000, 375000, 375000, 225000, 275000, 375000, 375000, 375000, 275000, 275000, 375000, 225000, 325000, 375000, 375000, 175000, 375000, 375000, 375000, 375000, 275000, 175000, 375000, 275000, 225000, 375000, 375000, 375000, 375000, 375000, 375000, 275000, 375000, 375000, 375000, 375000, 275000, 275000, 375000, 375000, 375000, 325000, 375000, 375000, 375000, 375000, 375000, 375000, 375000, 375000, 375000, 325000, 375000, 375000, 325000, 125000, 375000, 325000, 375000, 375000, 325000, 375000, 375000, 275000, 85000, 275000, 375000, 225000, 375000, 225000, 225000, 325000, 375000, 375000, 375000, 375000, 125000, 375000, 175000, 375000, 275000, 225000, 225000, 375000, 375000, 225000, 225000, 225000, 175000, 225000, 275000, 375000, 325000, 375000, 225000, 375000, 85000, 275000, 325000, 225000, 275000, 225000, 375000, 375000, 375000, 375000, 175000, 275000, 375000, 375000, 225000, 375000, 375000, 225000, 85000, 375000, 225000, 375000, 275000, 225000, 325000, 375000, 275000, 375000, 325000, 175000, 225000, 225000, 375000, 375000, 375000, 225000, 275000, 275000, 225000, 85000, 125000, 35000, 15000, 85000, 60000, 45000, 25000, 25000, 175000, 85000, 375000, 375000, 125000, 35000, 125000, 35000, 25000, 25000, 15000, 15000, 15000, 15000, 45000, 25000, 15000, 85000, 15000, 125000, 85000, 175000, 60000, 85000, 125000, 275000, 275000, 375000, 85000, 225000, 85000, 45000, 45000, 125000, 35000, 35000, 85000, 25000, 25000, 25000, 25000, 45000, 35000, 35000, 25000, 45000, 175000, 175000, 85000, 225000, 375000, 175000, 35000, 60000, 175000, 60000, 375000, 60000, 175000, 325000, 25000, 60000, 25000, 25000, 35000, 35000, 35000, 25000, 85000, 60000, 45000, 35000, 175000, 60000, 175000, 125000, 225000, 175000, 25000, 45000, 35000, 85000, 45000, 45000, 35000, 85000, 85000, 45000, 45000, 85000, 175000, 125000, 35000, 125000, 60000, 85000, 125000, 85000, 125000, 35000, 125000, 85000, 85000, 25000, 25000, 25000, 25000, 35000, 125000, 60000, 85000, 175000, 35000, 175000, 175000, 85000, 35000, 35000, 225000, 35000, 60000, 25000, 25000, 60000, 60000, 175000, 175000, 125000, 35000, 125000, 35000, 45000, 25000, 60000, 5000, 5000, 25000, 45000, 125000, 45000, 60000, 60000, 85000, 85000, 125000, 125000, 175000, 175000, 60000, 45000, 45000, 45000, 35000, 225000, 45000, 60000, 125000, 125000, 175000, 275000, 275000, 375000, 325000, 325000, 35000, 225000, 60000, 85000, 225000, 85000, 85000, 60000, 25000, 35000, 5000, 5000, 125000, 275000, 85000, 35000, 35000, 35000, 85000, 60000, 85000, 125000, 175000, 35000, 325000, 85000, 175000, 175000, 60000, 45000, 225000, 375000, 225000, 275000, 325000, 45000, 25000, 25000, 35000, 25000, 25000, 35000, 60000, 15000, 15000, 60000, 45000, 125000, 85000, 125000, 375000, 125000, 85000, 125000, 225000, 60000, 60000, 175000, 45000, 45000, 35000, 45000, 45000, 60000, 125000, 85000, 175000, 225000, 275000, 375000, 85000, 125000, 175000, 375000, 175000, 325000, 375000, 125000, 375000, 125000, 275000, 375000, 375000, 375000, 225000, 375000, 375000, 85000, 325000, 85000, 35000, 85000, 35000, 375000, 375000, 125000, 175000, 60000, 15000, 25000, 45000, 45000, 35000, 85000, 45000, 375000, 175000, 85000, 125000, 125000, 35000, 375000, 85000, 375000, 125000, 375000, 375000, 85000, 45000, 60000, 60000, 125000, 125000, 175000, 225000, 375000, 375000, 85000, 325000, 175000, 60000, 45000, 125000, 35000, 175000, 225000, 225000, 35000, 85000, 125000, 175000, 125000, 375000, 175000, 85000, 175000, 225000, 175000, 175000, 60000, 125000, 225000, 
                           45000, 125000, 125000, 15000, 85000, 125000, 175000, 60000, 45000, 175000, 85000, 275000, 60000, 85000, 85000, 125000, 125000, 125000, 175000, 85000, 175000, 225000, 375000, 175000, 125000, 35000, 125000, 85000, 225000, 85000, 225000, 375000, 45000, 125000, 85000, 45000, 325000, 25000, 375000, 60000, 85000, 85000, 25000, 25000, 35000, 25000, 175000, 175000, 60000, 25000, 60000, 175000, 175000, 85000, 125000, 85000, 275000, 85000, 45000, 35000, 35000, 85000, 60000, 60000, 60000, 85000, 125000, 45000, 35000, 35000, 125000, 35000, 60000, 60000, 60000, 60000, 175000, 45000, 45000, 225000, 225000, 375000, 45000, 85000, 175000, 175000, 125000, 275000, 175000, 60000, 125000, 125000, 85000, 60000, 85000, 125000, 85000, 175000, 375000, 60000, 125000, 45000, 325000, 85000, 125000, 60000, 125000, 125000, 60000, 35000, 125000, 35000, 35000, 275000, 35000, 275000, 325000, 275000, 225000, 175000, 35000, 35000, 85000, 45000, 225000, 60000, 45000, 325000, 125000, 125000, 25000, 175000, 85000, 175000, 375000, 85000, 175000, 375000, 60000, 375000, 375000, 125000, 35000, 275000, 85000, 85000, 45000, 45000, 60000, 225000, 60000, 375000, 60000, 60000, 125000, 85000, 45000, 45000, 60000, 45000, 125000, 375000, 35000, 60000, 175000, 225000, 85000, 45000, 45000, 60000, 60000, 60000, 85000, 125000, 125000, 225000, 25000, 275000, 175000, 25000, 125000, 85000, 125000, 325000, 125000, 325000, 35000, 225000, 60000, 85000, 125000, 375000, 85000, 60000, 60000, 60000, 85000, 35000, 125000, 85000, 85000, 85000, 85000, 125000, 225000, 325000, 85000, 85000, 275000, 275000, 85000, 60000, 375000, 60000, 85000, 85000, 35000, 35000, 85000, 85000, 60000, 35000, 25000, 25000, 325000, 125000, 125000, 375000, 275000, 325000, 175000, 125000, 375000, 60000, 275000, 275000, 275000, 325000, 225000, 85000, 125000, 275000, 375000, 175000, 375000, 85000, 60000, 25000, 25000, 25000, 25000, 25000, 60000, 85000, 60000, 60000, 85000, 175000, 325000, 375000, 325000, 125000, 85000, 375000, 375000, 375000, 375000, 60000, 375000, 375000, 375000, 375000, 85000, 60000, 125000, 375000, 225000, 225000, 225000, 175000, 175000, 85000, 85000, 60000, 125000, 175000, 225000, 85000, 45000, 275000, 85000, 375000, 175000, 60000, 375000, 375000, 125000, 375000, 275000, 275000, 125000, 375000, 375000, 375000, 375000, 375000, 125000, 225000, 45000, 175000, 85000, 15000, 125000, 85000, 375000, 125000, 225000, 85000, 45000, 225000, 60000, 175000, 125000, 125000, 125000, 375000, 375000, 325000, 375000, 375000, 375000, 375000, 175000, 125000, 175000, 85000, 35000, 60000, 125000, 125000, 60000, 175000, 175000, 60000, 85000, 60000, 45000, 45000, 125000, 85000, 325000, 175000, 85000, 60000, 60000, 85000, 375000, 45000, 45000, 60000, 85000, 45000, 45000, 45000, 275000, 85000, 125000, 275000, 60000, 85000, 125000, 60000, 85000, 125000, 325000, 325000, 375000, 375000, 375000, 375000, 85000, 35000, 125000, 85000, 125000, 60000, 60000, 85000, 175000, 45000, 125000, 175000, 225000, 85000, 15000, 15000, 125000, 60000, 175000, 375000, 60000, 45000, 60000, 35000, 45000, 60000, 175000, 60000, 125000, 275000, 375000, 125000, 125000, 60000, 125000, 125000, 225000, 325000, 325000, 375000, 125000, 175000, 85000, 85000, 45000, 25000, 35000, 35000, 35000, 60000, 60000, 35000, 225000, 325000, 35000, 35000, 60000, 375000, 375000, 275000, 375000, 225000, 175000, 175000, 15000, 15000, 15000, 35000, 15000, 45000, 35000, 15000, 25000, 175000, 175000, 25000, 175000, 60000, 25000, 35000, 85000, 35000, 375000, 60000, 45000, 45000, 85000, 125000, 125000, 85000, 125000, 85000, 85000, 60000, 85000, 60000, 45000, 60000, 35000, 60000, 60000, 125000, 85000, 125000, 125000, 225000, 375000, 60000, 60000, 60000, 85000, 175000, 125000, 85000, 85000, 85000, 225000, 325000, 125000, 60000, 85000, 45000, 25000, 375000, 125000, 175000, 125000, 45000, 125000, 125000, 125000, 45000, 25000, 225000, 60000, 85000, 85000, 85000, 225000, 35000, 35000, 25000, 45000, 60000, 60000, 60000, 175000, 125000, 60000, 125000, 175000, 175000, 175000, 325000, 375000, 85000, 60000, 275000, 60000, 125000, 35000, 35000, 45000, 35000, 35000, 225000, 25000, 25000, 25000, 25000, 60000, 60000, 60000, 85000, 45000, 45000, 60000, 60000, 60000, 125000, 60000, 60000, 175000, 175000, 375000, 45000, 45000, 45000, 45000, 45000, 45000, 45000, 35000, 35000, 35000, 35000, 175000, 35000, 45000, 275000, 85000, 225000, 85000, 225000, 125000, 60000, 85000, 45000, 60000, 45000, 45000, 85000, 60000, 85000, 85000, 175000, 125000, 175000, 15000, 85000, 85000, 85000, 85000, 45000, 15000, 125000, 35000, 35000, 35000, 225000, 45000, 125000, 60000, 225000, 225000, 325000, 60000, 60000, 275000, 225000, 225000, 175000, 375000, 225000, 60000, 375000, 375000, 375000, 60000, 85000, 45000, 45000, 45000, 45000, 125000, 275000, 45000, 85000, 60000, 60000, 60000, 60000, 45000, 60000, 45000, 45000, 125000, 60000, 60000, 125000, 175000, 60000, 375000, 60000, 60000, 60000, 85000, 60000, 60000, 85000, 85000, 35000, 275000, 325000, 175000, 85000, 175000, 60000, 60000, 175000, 225000, 60000, 225000, 125000, 125000, 125000, 225000, 85000, 85000, 225000, 125000, 175000, 225000, 275000, 375000, 175000, 225000, 225000, 85000, 85000, 175000, 175000, 225000, 275000, 275000, 325000, 375000, 375000, 85000, 85000, 225000, 225000, 175000, 175000, 225000, 125000, 45000, 60000, 85000, 60000, 35000, 35000, 35000, 85000, 85000, 60000, 125000, 375000, 375000, 275000, 225000, 125000, 125000, 125000, 125000, 45000, 25000, 125000, 60000, 60000, 60000, 45000, 375000, 60000, 60000, 60000, 15000, 25000, 60000, 375000, 325000, 25000, 45000, 45000, 175000, 125000, 175000, 45000, 175000, 5000, 85000, 85000, 225000, 60000, 60000, 60000, 60000, 45000, 375000, 275000, 275000, 85000, 85000, 225000, 125000, 175000, 175000, 85000, 175000, 45000, 85000]
                        break;
                    case 3:
                        this.data = json.R3
                        break
                    default:
                        this.data = json.R1
                        break;
                }
                this.initChartsData('chart') // 生成 Echarts 
            },

            methods: {
                initChartsData(ref) {
                    let chart = this.$refs[ref]
                    if (!chart) return
                    chart = echarts.init(chart)
                    // Echarts 图的配置
                    let options = {
                        // Echarts 图 -- x 坐标轴刻度 -- 正态分布数值
                        xAxis: [{
                            // name : "标准刻度(0.1)",
                            data: this.dataAfterCleanX,
                        }],
                        // Echarts 图 -- y 坐标轴刻度
                        yAxis: [{
                                type: 'value',
                                name: '频数',
                                position: 'left',
                                // 网格线
                                splitLine: {
                                    show: false
                                },
                                axisLine: {
                                    lineStyle: {
                                        color: 'orange'
                                    }
                                },
                                axisLabel: {
                                    formatter: '{value}'
                                }
                            },
                            {
                                type: 'value',
                                name: '概率',
                                position: 'right',
                                // 网格线
                                splitLine: {
                                    show: false
                                },
                                axisLine: {
                                    lineStyle: {
                                        color: 'black'
                                    }
                                },
                                axisLabel: {
                                    formatter: '{value}'
                                },
                                show:false
                            },
                        ],
                        // Echarts 图 -- y 轴数据
                        series: [{
                            name: '源数据', // y 轴名称
                            type: 'bar', // y 轴类型
                            yAxisIndex: 0,
                            barGap: 0,
                            barWidth: 27,
                            itemStyle: {
                                normal: {
                                    show: true,
                                    color: 'rgba(255, 204, 0,.3)', //柱子颜色
                                    borderColor: '#FF7F50' //边框颜色
                                }
                            },
                            data: this.dataAfterCleanY, // y 轴数据 -- 源数据
                        }, {
                            name: '正态分布', // y 轴名称
                            type: 'line', // y 轴类型
                            symbol: 'none', //去掉折线图中的节点
                            smooth: true, //true 为平滑曲线
                            yAxisIndex: 1,
                            data: this.normalDistribution, // y 轴数据 -- 正态分布
                            // 警示线
                            markLine: {
                                symbol: ['none'], // 箭头方向
                                lineStyle: {
                                    type: "silent",
                                    color: "green",
                                },
                                itemStyle: {
                                    normal: {
                                        show: true,
                                        color: 'black'
                                    }
                                },
                                label: {
                                    show: true,
                                    position: "middle"
                                },
                                data: [{
                                    name: '一倍标准差',
                                    xAxis: this.standarDevRangeOfOne.low.toFixed(1),
                                    // 当 n 倍标准差在坐标轴外时，将其隐藏，否则它会默认显示在最小值部分，容易引起混淆
                                    lineStyle: {
                                        opacity: (this.min > this.standarDevRangeOfOne
                                            .low) ? 0 : 1
                                    },
                                    label: {
                                        show: !(this.min > this.standarDevRangeOfOne.low)
                                    }
                                }, {
                                    name: '一倍标准差',
                                    xAxis: this.standarDevRangeOfOne.up.toFixed(1),
                                    lineStyle: {
                                        opacity: (this.max < this.standarDevRangeOfOne.up) ?
                                            0 : 1
                                    },
                                    label: {
                                        show: !(this.max < this.standarDevRangeOfOne.up)
                                    }
                                }, {
                                    name: '二倍标准差',
                                    xAxis: this.standarDevRangeOfTwo.low.toFixed(1),
                                    lineStyle: {
                                        opacity: (this.min > this.standarDevRangeOfTwo
                                            .low) ? 0 : 1
                                    },
                                    label: {
                                        show: !(this.min > this.standarDevRangeOfTwo.low)
                                    }
                                }, {
                                    name: '二倍标准差',
                                    xAxis: this.standarDevRangeOfTwo.up.toFixed(1),
                                    lineStyle: {
                                        opacity: (this.max < this.standarDevRangeOfTwo
                                            .up) ? 0 : 1
                                    },
                                    label: {
                                        show: !(this.max < this.standarDevRangeOfTwo.up)
                                    }
                                }, {
                                    name: '三倍标准差',
                                    xAxis: this.standarDevRangeOfThree.low.toFixed(1),
                                    lineStyle: {
                                        opacity: (this.min > this.standarDevRangeOfThree
                                            .low) ? 0 : 1
                                    },
                                    label: {
                                        show: !(this.min > this.standarDevRangeOfThree.low)
                                    }
                                }, {
                                    name: '三倍标准差',
                                    xAxis: this.standarDevRangeOfThree.up.toFixed(1),
                                    lineStyle: {
                                        opacity: (this.max < this.standarDevRangeOfThree
                                            .up) ? 0 : 1
                                    },
                                    label: {
                                        show: !(this.max < this.standarDevRangeOfThree.up)
                                    }
                                }, {
                                    name: '平均值',
                                    // type: 'average',
                                    xAxis: this.average.toFixed(1),
                                    lineStyle: {
                                        color: 'red'
                                    }
                                }, ]
                            }
                        }],

                    }
                    chart.setOption(options)
                    window.addEventListener("resize", () => {
                        chart.resize()
                    })
                },
            }
        })
    </script>
</body>

</html>
